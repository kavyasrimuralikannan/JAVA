class Solution {
    Map<Integer,Integer> map= new HashMap<>();
    int dfs(TreeNode root){
        if(root==null) return 0;
        int sum=0;
        sum+=dfs(root.left);
        sum+=dfs(root.right);
        sum+=root.val;
        map.put(sum,map.getOrDefault(sum,0)+1);
        return sum;
    }
    public int[] findFrequentTreeSum(TreeNode root) {
        ArrayList<Integer> list=new ArrayList<>();
        int sum,max=Integer.MIN_VALUE;
        sum=dfs(root);
        for(int i:map.values())
            max=Math.max(max,i);
        for(int i:map.keySet()){
            if(map.get(i)==max) list.add(i);
        }
        //System.out.println(list);
        return list.stream().mapToInt(i->i).toArray();
    }
}
